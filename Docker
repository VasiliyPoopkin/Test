#task 1 FlaskProject


FROM python:3.8

RUN pip install Flask

COPY . /app
WORKDIR /app

ENV FLASK_APP=app.py

EXPOSE 4200


#yaml file


version: '3'
services:
  flask_app:
    build: .
    ports:
      - "4200:4200"
    environment:
      - DATABASE_URL=postgresql://postgres_user:postgres_password@postgres:5432/flask_db
    depends_on:
      - postgres

  nginx:
    image: nginx:latest
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - flask_app

  postgres:
    image: postgres:latest
    environment:
      - POSTGRES_DB=flask_db
      - POSTGRES_USER=postgres_user
      - POSTGRES_PASSWORD=postgres_password
nginx
Copy code
server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://flask_app:4200;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

#ngix.config

server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://flask_app:4200;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}


#task 2 DjangoProject


FROM python:3.8

RUN pip install Django

COPY . /app
WORKDIR /app

EXPOSE 8000

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]


#yaml file


version: '3'
services:
  django_app:
    build: .
    command: python manage.py runserver 0.0.0.0:8000
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://postgres_user:postgres_password@postgres:5432/django_db
      - REDIS_URL=redis://redis:6379/0
      - CELERY_BROKER_URL=redis://redis:6379/0
      - CELERY_RESULT_BACKEND=redis://redis:6379/0
    depends_on:
      - postgres
      - redis

  nginx:
    image: nginx:latest
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - django_app

  redis:
    image: redis:latest

  postgres:
    image: postgres:latest
    environment:
      - POSTGRES_DB=django_db
      - POSTGRES_USER=postgres_user
      - POSTGRES_PASSWORD=postgres_password

  celery_worker:
    build: .
    command: celery -A your_project_name worker -l info
    depends_on:
      - redis
      - postgres
      - django_app

  celery_beat:
    build: .
    command: celery -A your_project_name beat -l info
    depends_on:
      - redis
      - postgres
      - django_app


#ngix.config


server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://django_app:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
